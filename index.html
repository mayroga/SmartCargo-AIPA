<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartCargo AI - Auditor√≠a T√©cnica</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
    <style>
        body { background-color: #f4f7f6; padding: 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .container { max-width: 800px; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .logo { font-weight: bold; color: #01579b; font-size: 2.4rem; margin-bottom: 20px; border-left: 5px solid #ffd600; padding-left: 15px; }
        
        /* Roles Selector */
        .role-selector { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .role-btn { flex: 1; border: 1px solid #ddd; background: #fff; cursor: pointer; transition: 0.3s; padding: 10px; font-size: 0.8em; text-transform: uppercase; }
        .role-btn.active { background: #01579b; color: white; border-color: #01579b; font-weight: bold; }
        
        /* Secciones */
        #accessSection { background: #fffde7; padding: 20px; border-radius: 8px; border: 1px solid #fff59d; margin-bottom: 30px; }
        #mainApp { transition: opacity 0.5s ease; }
        
        textarea { width: 100%; height: 120px; resize: none; }
        .report-box { background: #fafafa; border: 1px solid #01579b; padding: 25px; border-radius: 8px; margin-top: 20px; line-height: 1.6; }
        #loader { color: #01579b; font-weight: bold; display: none; margin: 15px 0; }
        
        .footer-info { margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; font-size: 0.9em; }
    </style>
</head>
<body>

<div class="container">
    <div class="logo">SmartCargo AI</div>

    <div id="accessSection">
        <h5 id="t_act">1. Service Activation</h5>
        <div class="row">
            <div class="six columns">
                <label>Master AWB / ID</label>
                <input type="text" id="awbField" class="u-full-width" placeholder="Ej: 020-12345678">
            </div>
            <div class="six columns">
                <label>Audit Level</label>
                <select id="priceSelect" class="u-full-width">
                    <option value="10">Technical Audit - $10</option>
                    <option value="25">Full Cargo Shield - $25</option>
                </select>
            </div>
        </div>
        <button id="activateBtn" class="button-primary u-full-width">Unlock Analysis Engine</button>
    </div>

    <div id="mainApp" style="opacity: 0.2; pointer-events: none;">
        <h5 id="t_sol">2. SmartCargo Solution Center</h5>
        
        <label>Select your profile:</label>
        <div class="role-selector">
            <button type="button" class="role-btn active" data-role="shipper">Shipper</button>
            <button type="button" class="role-btn" data-role="forwarder">Freight FWD</button>
            <button type="button" class="role-btn" data-role="trucker">Trucker</button>
            <button type="button" class="role-btn" data-role="counter">Counter/Whse</button>
        </div>

        <form id="advForm">
            <input type="hidden" name="role" id="roleInput" value="shipper">
            
            <label>Detailed Observations (Optional):</label>
            <textarea name="prompt" id="promptArea" placeholder="Describe specific damages, missing labels, or cargo condition..."></textarea>
            
            <label>Upload Evidence (Photos):</label>
            <input type="file" name="files" id="fileInput" accept="image/*" multiple>
            <p style="font-size: 0.7em; color: gray;">* Up to 3 high-res images for Gemini 1.5 Vision analysis.</p>

            <button type="submit" id="submitBtn" class="button-primary u-full-width" style="background: #2e7d32; border:none;">üöÄ Run Technical Audit</button>
        </form>

        <div id="loader">üîç SMARTCARGO AI: ANALYZING IMAGES & REGULATIONS...</div>
        
        <div id="advResponse"></div>

        <div id="actionBtns" style="display:none; gap:10px; margin-top:15px;">
            <button onclick="downloadPDF()" class="button">üìÑ Download Report</button>
            <button onclick="shareWA()" class="button">üü¢ Send to WhatsApp</button>
        </div>

        <div id="timerBox" style="display:none; color: #d32f2f; font-weight: bold; text-align: center; margin-top: 20px;">
            ‚è≥ Privacy Alert: Session expires in <span id="secs">300</span>s.
        </div>
    </div>

    <div class="footer-info">
        <h6 id="m_title">Why SmartCargo?</h6>
        <p id="m_desc" style="color: #666;"></p>
        <div style="background: #f1f1f1; padding: 15px; border-radius: 5px;">
            <strong id="l_title"></strong><br>
            <small id="l_desc"></small>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="app.js"></script>
</body>
</html>

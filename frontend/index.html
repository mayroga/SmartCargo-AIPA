<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SMARTCARGO-AIPA</title>

<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #f2f4f7;
    margin: 0;
    padding: 0;
  }

  .container {
    max-width: 1200px;
    margin: 30px auto;
    background: #ffffff;
    padding: 30px 40px;
    border-radius: 14px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  }

  h1 {
    margin-top: 0;
    color: #002b5c;
  }

  .subtitle {
    color: #555;
    margin-bottom: 30px;
  }

  .level {
    margin-bottom: 25px;
    border: 1px solid #ddd;
    border-radius: 10px;
    overflow: hidden;
  }

  .level-header {
    background: #004080;
    color: white;
    padding: 14px 18px;
    font-size: 17px;
    cursor: pointer;
  }

  .level-content {
    display: none;
    padding: 20px;
    background: #fafafa;
  }

  .question {
    margin-bottom: 22px;
  }

  .question-title {
    font-weight: 600;
    margin-bottom: 10px;
    color: #222;
  }

  .options label {
    display: block;
    margin-bottom: 6px;
    cursor: pointer;
  }

  .options input {
    margin-right: 8px;
  }

  .actions {
    text-align: center;
    margin-top: 35px;
  }

  button {
    background: #004080;
    color: white;
    border: none;
    padding: 14px 26px;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
    margin: 8px;
  }

  button:hover {
    background: #0066cc;
  }

  #result {
    margin-top: 35px;
    padding: 25px;
    border-radius: 12px;
    display: none;
  }

  #semaphore {
    font-size: 22px;
    font-weight: bold;
    margin-bottom: 15px;
  }

  .green { color: #0a8f08; }
  .yellow { color: #d4a000; }
  .red { color: #c00000; }

  .recommendations {
    margin-top: 15px;
    font-size: 15px;
  }
</style>
</head>

<body>

<div class="container">

<h1>SMARTCARGO-AIPA</h1>
<p class="subtitle">
Preventive Cargo Acceptance Advisory System<br>
Operational Â· Legal Â· Non-binding
</p>

<!-- ================= LEVEL 1 ================= -->
<div class="level">
  <div class="level-header" onclick="toggleLevel(this)">
    Level 1 â€“ Identification & Transport
  </div>
  <div class="level-content">

    <div class="question">
      <div class="question-title">1. Type of cargo</div>
      <div class="options">
        <label><input type="radio" name="q1" value="Pharmaceutical"> Pharmaceutical</label>
        <label><input type="radio" name="q1" value="DG"> Dangerous Goods</label>
        <label><input type="radio" name="q1" value="Perishable"> Perishable</label>
        <label><input type="radio" name="q1" value="Human Remains"> Human Remains</label>
        <label><input type="radio" name="q1" value="General Cargo"> General Cargo</label>
        <label><input type="radio" name="q1" value="Other"> Other</label>
      </div>
    </div>

    <div class="question">
      <div class="question-title">2. Delivered by</div>
      <div class="options">
        <label><input type="radio" name="q2" value="Authorized Driver"> Authorized Driver</label>
        <label><input type="radio" name="q2" value="Freight Forwarder"> Freight Forwarder</label>
        <label><input type="radio" name="q2" value="Company"> Company</label>
        <label><input type="radio" name="q2" value="Owner"> Owner personally</label>
      </div>
    </div>

    <div class="question">
      <div class="question-title">3. Land transport method</div>
      <div class="options">
        <label><input type="radio" name="q3" value="Refrigerated Truck"> Refrigerated Truck</label>
        <label><input type="radio" name="q3" value="Regular Truck"> Regular Truck</label>
        <label><input type="radio" name="q3" value="Other"> Other</label>
      </div>
    </div>

    <div class="question">
      <div class="question-title">4. Cargo condition upon receipt</div>
      <div class="options">
        <label><input type="radio" name="q4" value="Mixed"> Mixed with other cargo</label>
        <label><input type="radio" name="q4" value="Separated"> Separated by type</label>
        <label><input type="radio" name="q4" value="Organized"> Pallets / bundles organized</label>
      </div>
    </div>

    <div class="question">
      <div class="question-title">5. Max pallet / bundle height</div>
      <div class="options">
        <label><input type="radio" name="q5" value="Within limits"> Within limits</label>
        <label><input type="radio" name="q5" value="Exceeds"> Exceeds limits</label>
      </div>
    </div>

  </div>
</div>

<!-- ================= LEVEL 2 ================= -->
<div class="level">
  <div class="level-header" onclick="toggleLevel(this)">
    Level 2 â€“ Documentation
  </div>
  <div class="level-content">

    <div class="question">
      <div class="question-title">9. Original AWB present</div>
      <div class="options">
        <label><input type="radio" name="q9" value="Inside envelope"> Inside envelope</label>
        <label><input type="radio" name="q9" value="Loose"> Loose</label>
        <label><input type="radio" name="q9" value="Not available"> Not available</label>
      </div>
    </div>

    <div class="question">
      <div class="question-title">12. Shipper name matches documents</div>
      <div class="options">
        <label><input type="radio" name="q12" value="Yes"> Yes</label>
        <label><input type="radio" name="q12" value="Unclear"> Unclear</label>
        <label><input type="radio" name="q12" value="No"> No</label>
      </div>
    </div>

    <div class="question">
      <div class="question-title">13. AWB matches physical cargo</div>
      <div class="options">
        <label><input type="radio" name="q13" value="Yes"> Yes</label>
        <label><input type="radio" name="q13" value="No"> No</label>
      </div>
    </div>

  </div>
</div>

<!-- ================= ACTIONS ================= -->
<div class="actions">
  <button onclick="submitForm()">Validate Cargo</button>
  <button onclick="location.reload()">Clear</button>
</div>

<!-- ================= RESULT ================= -->
<div id="result">
  <div id="semaphore"></div>
  <div class="recommendations" id="recommendations"></div>
</div>

</div>

<script>
function toggleLevel(el) {
  const content = el.nextElementSibling;
  content.style.display = content.style.display === "block" ? "none" : "block";
}

function submitForm() {
  const answers = {};
  document.querySelectorAll("input[type=radio]:checked").forEach(r => {
    answers[r.name] = r.value;
  });

  fetch("/validate", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ answers })
  })
  .then(r => r.json())
  .then(res => showResult(res))
  .catch(() => alert("Validation service unavailable"));
}

function showResult(res) {
  const box = document.getElementById("result");
  const sem = document.getElementById("semaphore");
  const rec = document.getElementById("recommendations");

  box.style.display = "block";

  if (res.semaforo === "GREEN") {
    sem.innerHTML = "ðŸŸ¢ ACCEPTABLE FOR CARGO";
    sem.className = "green";
  } else if (res.semaforo === "YELLOW") {
    sem.innerHTML = "ðŸŸ¡ CONDITIONAL â€“ REVIEW REQUIRED";
    sem.className = "yellow";
  } else {
    sem.innerHTML = "ðŸ”´ NOT ACCEPTABLE â€“ ACTION REQUIRED";
    sem.className = "red";
  }

  rec.innerHTML = res.recs.join("<br>");
}
</script>

</body>
</html>
